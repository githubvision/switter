%div.swit{:id => "swit#{@swit.id}"}
	.swit-nametag
		.swit-name
			= @swit.user.first_name
			= @swit.user.last_name

		.swit-username
			@
			= @swit.user.username
	%div.swit-contents
		%div.swit-post
			- @str_ind =  @swit.post =~ /{[^{}]+}/
			- @content = @swit.post
			- while @str_ind != nil do
				= @content[0..@str_ind-1]
				- @match = @content[/{[^{}]+}/]
				= link_to :controller => 'swits', :action => 'index', :to_match => "#{@match}", class: "doortags" do
					= @match
				- @next_ind = @str_ind + @match.length
				- @content = @content[@next_ind..-1]
				- @str_ind = @content =~ /{[^{}]+}/
			= @content
		%div.swit-timestamp
			= time_ago_in_words(@swit.created_at) 
			ago
		%div.swit-functions
			.swit-function
				= link_to :controller => 'swits', :action => 'show', :id => @swit.id, data: { swit: @swit, id: @swit.id }, :remote => true, class: "ui labeled button" do
					.ui.basic.blue.button.show-comments{ data: { swit: @swit, id: @swit.id }}
						%span.swit-repliescount{:id => "count#{@swit.id}"}
							= @swit.comments.count
						- if @swit.comments.count > 1
							Replies
						- else
							Reply

			.swit-function
				= button_to swit_path(:action => 'update', :id => @swit.id), :method => :put, params: {:mode => 'sweet'}, :remote => true, class: "ui labeled button" do
					.ui.red.button
						%i.icon.map.pin
						Sweet
					%a.ui.basic.red.left.pointing.label
						.swit-sweetcount{:id => "count#{@swit.id}"}
							= @swit.sweets.count
			.swit-function
				= button_to swit_path(:action => 'update', :id => @swit.id), :method => :put, params: {:mode => 'sour'}, :remote => true, class: "ui labeled button" do
					.ui.yellow.button
						%i.icon.lemon
						Sour
					%a.ui.basic.yellow.left.pointing.label
						.swit-sourcount{:id => "count#{@swit.id}"}
							= @swit.sours.count